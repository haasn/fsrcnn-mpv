//!HOOK LUMA
//!DESC feature map 0
//!BIND LUMA
//!SAVE FEATURE0
//!COMPONENTS 4

vec4 hook()
{
vec4 res = vec4(0.51655,-2.40939e-2,-1.24776e-3,-5.6635e-2);
res += vec4(4.7111697495e-2,-1.27308424562e-2,-5.82339540124e-2,2.93522961438e-2) * float(LUMA_texOff(vec2(-2,-2)));
res += vec4(2.35338527709e-2,-8.07302370667e-2,-8.00238996744e-2,5.36922290921e-2) * float(LUMA_texOff(vec2(-2,-1)));
res += vec4(-1.16273574531e-2,-4.84868045896e-3,-2.18369644135e-2,-3.7047190126e-3) * float(LUMA_texOff(vec2(-2,0)));
res += vec4(-3.01540922374e-3,1.75939332694e-2,4.01100795716e-3,3.20707522333e-2) * float(LUMA_texOff(vec2(-2,1)));
res += vec4(-2.91586155072e-3,-1.21205123141e-2,1.9051078707e-2,-2.9442910105e-2) * float(LUMA_texOff(vec2(-2,2)));
res += vec4(5.05730286241e-2,-1.00671583787e-2,2.55545526743e-2,6.52065128088e-2) * float(LUMA_texOff(vec2(-1,-2)));
res += vec4(9.82784926891e-2,4.59155999124e-3,-3.86520624161e-2,1.20644774288e-2) * float(LUMA_texOff(vec2(-1,-1)));
res += vec4(5.24111762643e-2,8.87843444943e-2,3.54389706627e-3,9.38619598746e-2) * float(LUMA_texOff(vec2(-1,0)));
res += vec4(7.94024467468e-2,3.46789620817e-2,-4.75046932697e-2,-1.75459645689e-2) * float(LUMA_texOff(vec2(-1,1)));
res += vec4(8.57816729695e-3,-7.36729502678e-2,-7.35334400088e-3,3.40857729316e-2) * float(LUMA_texOff(vec2(-1,2)));
res += vec4(-1.29295326769e-2,2.56750062108e-2,-7.00067952275e-2,7.85527937114e-3) * float(LUMA_texOff(vec2(0,-2)));
res += vec4(5.7023152709e-2,3.68136563338e-4,4.65443395078e-2,6.9342918694e-2) * float(LUMA_texOff(vec2(0,-1)));
res += vec4(-0.738169431686,3.7415693514e-3,-4.97588142753e-3,1.04404520988) * float(LUMA_texOff(vec2(0,0)));
res += vec4(-9.4131808728e-3,-2.94061265886e-2,-2.26735062897e-2,1.63645055145e-2) * float(LUMA_texOff(vec2(0,1)));
res += vec4(2.56015453488e-2,-1.33246146142e-2,-1.45909776911e-2,4.26804982126e-2) * float(LUMA_texOff(vec2(0,2)));
res += vec4(1.20770670474e-2,-7.68803134561e-2,-4.16295826435e-2,3.56608070433e-2) * float(LUMA_texOff(vec2(1,-2)));
res += vec4(5.87420240045e-2,4.84516657889e-2,4.16292883456e-2,-2.02609654516e-2) * float(LUMA_texOff(vec2(1,-1)));
res += vec4(3.33527959883e-2,1.42396017909e-2,2.33772881329e-2,5.24079017341e-2) * float(LUMA_texOff(vec2(1,0)));
res += vec4(6.49727582932e-2,-9.2421611771e-3,-5.35227684304e-3,-6.37035584077e-4) * float(LUMA_texOff(vec2(1,1)));
res += vec4(2.29953732342e-2,-7.48595148325e-2,-1.72170752194e-3,4.29895594716e-2) * float(LUMA_texOff(vec2(1,2)));
res += vec4(3.6793269217e-2,-6.04014694691e-2,-2.33402401209e-2,7.45645258576e-3) * float(LUMA_texOff(vec2(2,-2)));
res += vec4(1.54589917511e-2,-2.80166640878e-2,1.25365415588e-2,4.72608059645e-2) * float(LUMA_texOff(vec2(2,-1)));
res += vec4(6.1665892601e-2,5.58976382017e-2,-8.02147611976e-2,6.14817887545e-2) * float(LUMA_texOff(vec2(2,0)));
res += vec4(1.72220245004e-2,-8.07060077786e-2,-2.8228584677e-2,5.12590222061e-2) * float(LUMA_texOff(vec2(2,1)));
res += vec4(1.58836618066e-2,1.92561972653e-4,-1.90239176154e-2,8.07460979559e-4) * float(LUMA_texOff(vec2(2,2)));
res = mix(res, vec4(9.67003e-3,-9.29752e-3,8.41814e-4,7.88548e-2) * res, lessThan(res, vec4(0.0)));
return vec4(res);
}

//!HOOK LUMA
//!DESC shrinking
//!BIND FEATURE0
//!SAVE MODEL
//!COMPONENTS 2

vec4 hook()
{
vec2 res = vec2(0.960192,-5.97092e-3);
res += mat4x2(0.758164167404,-0.238971844316,-0.591218531132,-2.72625759244e-2,-0.297585785389,3.16921137273e-2,-0.870758652687,-0.414128929377) * vec4(FEATURE0_texOff(vec2(0,0)));
res = mix(res, vec2(0.477507,-7.43882e-2) * res, lessThan(res, vec2(0.0)));
return vec4(res, 0.0, 0.0);
}

//!HOOK LUMA
//!DESC mapping 1
//!BIND MODEL
//!SAVE MODEL
//!COMPONENTS 2

vec4 hook()
{
vec2 res = vec2(0.190763,0.120393);
res += mat2(7.81123759225e-3,5.59216290712e-2,-5.25366477668e-2,0.214734464884) * vec2(MODEL_texOff(vec2(-1,-1)));
res += mat2(-0.183337047696,5.92923462391e-2,5.47977052629e-2,4.09008450806e-2) * vec2(MODEL_texOff(vec2(-1,0)));
res += mat2(1.04676233605e-2,7.04043656588e-2,0.167754843831,-6.50847330689e-2) * vec2(MODEL_texOff(vec2(-1,1)));
res += mat2(-1.04464143515e-2,-0.145912617445,7.32982456684e-2,-5.28131723404e-2) * vec2(MODEL_texOff(vec2(0,-1)));
res += mat2(0.977525293827,0.87990039587,2.0838720724e-2,-5.52164502442e-2) * vec2(MODEL_texOff(vec2(0,0)));
res += mat2(-0.146097049117,1.78662277758e-2,0.251452356577,-7.54488408566e-2) * vec2(MODEL_texOff(vec2(0,1)));
res += mat2(-0.140685722232,0.154653608799,-5.71816153824e-2,-6.65760114789e-2) * vec2(MODEL_texOff(vec2(1,-1)));
res += mat2(-8.50620046258e-2,0.142946898937,0.179678201675,6.89749559388e-3) * vec2(MODEL_texOff(vec2(1,0)));
res += mat2(-3.11551615596e-2,7.48027265072e-2,0.121399439871,6.27064034343e-2) * vec2(MODEL_texOff(vec2(1,1)));
res = mix(res, vec2(2.66747e-2,7.52121e-3) * res, lessThan(res, vec2(0.0)));
return vec4(res, 0.0, 0.0);
}

//!HOOK LUMA
//!DESC expansion 0
//!BIND MODEL
//!SAVE EXPANDED0
//!COMPONENTS 4

vec4 hook()
{
vec4 res = vec4(0.465359,-9.49314e-6,-0.202143,-2.67428e-4);
res += mat2x4(-0.298810124397,-4.3613627553e-2,0.866921067238,-0.103471674025,0.200132071972,-1.67408250272e-2,0.748284399509,-0.284485667944) * vec2(MODEL_texOff(vec2(0,0)));
res = mix(res, vec4(7.07689e-3,2.10936e-5,0.279285,-1.99172e-3) * res, lessThan(res, vec4(0.0)));
return vec4(res);
}

//!WIDTH LUMA.w 3 *
//!HEIGHT LUMA.h 3 *
//!HOOK LUMA
//!DESC reconstruction
//!BIND EXPANDED0
//!SAVE LUMA
//!COMPONENTS 1

vec4 hook()
{
float res = float(0.932049);
vec2 fcoord = fract(EXPANDED0_pos * EXPANDED0_size);
vec2 base = EXPANDED0_pos + (vec2(0.5) - fcoord) * EXPANDED0_pt;
ivec2 index = 2 - ivec2(fcoord * vec2(3));
res += dot(vec4[](
vec4(-1.40087231994e-2,6.36861805106e-5,-4.5292689465e-3,-2.72077246336e-4),
vec4(-1.1294869706e-2,2.14255851461e-5,2.77478189673e-4,-1.33334251586e-4),
vec4(7.46126612648e-3,-4.09677450079e-5,2.1105658263e-2,-3.42957973771e-5),
vec4(-3.33505570889e-2,-1.6961921574e-6,8.33559129387e-3,-3.36029072059e-4),
vec4(-7.10246572271e-3,1.23501095004e-5,8.97109915968e-4,-2.42455658736e-4),
vec4(4.44591082633e-2,1.28925574245e-4,2.59261019528e-3,-1.69539824128e-4),
vec4(-4.01607900858e-2,1.26540981e-4,3.42779383063e-2,-7.8416604083e-5),
vec4(1.60555038601e-2,-9.62665872066e-5,9.16166882962e-3,-1.75101609784e-4),
vec4(0.10926271975,-4.79693080706e-5,-2.4068178609e-2,-7.86222444731e-5)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(-1, -1)));
res += dot(vec4[](
vec4(-7.45263919234e-2,-1.9188974693e-4,2.62767318636e-2,-9.14764823392e-5),
vec4(-2.17135692947e-3,1.44749399624e-4,-2.04961691052e-2,-7.73548672441e-5),
vec4(0.117881394923,-5.51924786123e-5,-0.120625205338,-3.41938546626e-4),
vec4(-6.41822069883e-2,4.63888181912e-6,3.86828742921e-2,-8.67892740644e-5),
vec4(9.61673632264e-3,1.17502044304e-4,-9.09349042922e-3,-2.53537175013e-4),
vec4(0.131336450577,4.33454661106e-5,-0.119407318532,-1.73293388798e-4),
vec4(-7.89470225573e-2,-1.13613517897e-4,1.72000024468e-2,-3.0909551424e-4),
vec4(-1.66283156723e-2,9.28448498598e-5,-1.85513198376e-2,-2.77976505458e-4),
vec4(9.24681425095e-2,2.31723061006e-5,-0.108986310661,-4.1911075823e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(0, -1)));
res += dot(vec4[](
vec4(-2.36550364643e-2,1.58207694767e-4,1.00285643712e-2,-7.82243587309e-5),
vec4(5.87552879006e-3,-1.98953657673e-5,5.07387681864e-4,-8.44902315293e-5),
vec4(7.52831324935e-2,3.19650389429e-5,-9.89484600723e-3,-1.94405743969e-4),
vec4(-1.3215710409e-2,-4.16149532612e-6,-2.02242452651e-2,-1.07672043669e-4),
vec4(-1.1184476316e-2,-4.20960823249e-5,-1.75686255097e-2,-1.59718954819e-4),
vec4(1.81312635541e-2,-6.40230573481e-5,4.78984415531e-3,-4.20156757173e-5),
vec4(1.12069752067e-2,-9.00835075299e-5,-2.52595804632e-2,-3.50170681486e-4),
vec4(-5.0919293426e-3,-5.31270461579e-6,-1.69371254742e-2,-1.70585008163e-5),
vec4(-5.41354995221e-3,1.92819730728e-4,1.81787535548e-2,1.63148288266e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(1, -1)));
res += dot(vec4[](
vec4(-7.48680755496e-2,-2.2433749109e-5,2.20410786569e-2,-1.78403453901e-4),
vec4(-6.68079257011e-2,-5.45914881513e-5,4.08397838473e-2,-2.5673332857e-4),
vec4(-9.81990247965e-2,4.85498203489e-5,3.25146391988e-2,-1.10284963739e-4),
vec4(-6.73223519698e-3,-6.61089361529e-5,-2.28722207248e-2,-1.37784285471e-4),
vec4(1.03728296235e-2,-8.78712453414e-5,-8.39625392109e-3,-3.86379513657e-4),
vec4(-2.65496950597e-2,9.74367067101e-5,-6.32100971416e-3,-1.69792314409e-4),
vec4(0.107209213078,-8.1541686086e-5,-0.110823154449,-3.68962064385e-4),
vec4(0.139881372452,8.37844854686e-5,-0.110948354006,-1.21102268167e-4),
vec4(9.54864099622e-2,1.51789048687e-4,-9.18611064553e-2,-7.70548722357e-5)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(-1, 0)));
res += dot(vec4[](
vec4(-1.51807703078e-2,-9.82354249572e-5,-0.40591070056,-3.14172648359e-4),
vec4(2.86829117686e-2,1.95731427084e-5,-0.449424624443,-6.05126144364e-4),
vec4(-1.78555436432e-2,1.29262180053e-5,-0.394309192896,-3.40642291121e-4),
vec4(1.75085626543e-2,-3.42900639225e-5,-0.440691620111,-5.85346308071e-4),
vec4(6.60522431135e-2,2.4806273359e-5,-0.499229699373,-4.45437675808e-4),
vec4(2.19418611377e-2,2.11769547604e-5,-0.443398267031,-6.24426931608e-4),
vec4(-3.02213635296e-2,-2.13676576095e-5,-0.389702111483,-3.22489271639e-4),
vec4(1.53221227229e-2,1.85347744264e-4,-0.44547405839,-4.48765989859e-4),
vec4(-2.3946583271e-2,1.35158508783e-4,-0.405343294144,-4.61744319182e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(0, 0)));
res += dot(vec4[](
vec4(8.69638770819e-2,-2.9421353247e-5,-5.56978918612e-2,-1.78996226168e-4),
vec4(0.131213933229,1.06914936623e-4,-6.77944049239e-2,-1.51284402818e-4),
vec4(0.110340297222,-1.89128681086e-4,-7.57828205824e-2,-6.50426445645e-5),
vec4(-2.19035837799e-2,-4.30637301179e-5,2.90140174329e-2,-3.373803047e-4),
vec4(9.30804386735e-3,6.60473015159e-5,3.76848056912e-2,-2.50441749813e-4),
vec4(-1.85269699432e-3,-1.9498187612e-5,1.61190871149e-2,-1.0424334323e-4),
vec4(-8.80551114678e-2,-1.89040787518e-4,6.3853867352e-2,-2.60190456174e-4),
vec4(-6.91765099764e-2,-1.33851090141e-5,8.39580893517e-2,-1.88138146768e-4),
vec4(-7.58693367243e-2,-9.41685430007e-5,6.07557035983e-2,-1.57844755449e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(1, 0)));
res += dot(vec4[](
vec4(-9.31115075946e-3,-3.58137585863e-5,3.23786363006e-2,-2.19716588617e-4),
vec4(-2.19310056418e-2,3.98643169319e-5,4.81717986986e-3,-2.10795085877e-4),
vec4(-8.92789568752e-3,-1.73003878444e-4,-5.20869996399e-3,-4.17009840021e-4),
vec4(3.24085578322e-2,-5.11059733981e-5,1.70395057648e-2,-1.39626281452e-5),
vec4(-1.3945450075e-2,1.16532908578e-4,5.34473685548e-3,-2.43079848588e-4),
vec4(-2.39801630378e-2,-1.00935758383e-4,2.00857804157e-3,-2.18746747123e-4),
vec4(0.121621906757,1.89195314306e-4,-1.19137307629e-2,4.93626721436e-5),
vec4(3.1544726342e-2,-1.65788966115e-4,1.01806493476e-2,-1.68810947798e-4),
vec4(-1.1072665453e-2,-1.07100468085e-5,2.14159041643e-2,-1.96114677237e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(-1, 1)));
res += dot(vec4[](
vec4(0.107372768223,3.92764850403e-5,-0.106947362423,-2.58833926637e-4),
vec4(-8.46644863486e-3,9.32920447667e-5,-1.33655667305e-2,-2.53296777373e-4),
vec4(-7.76834487915e-2,-2.96863545373e-5,2.44831778109e-2,-1.37895520311e-4),
vec4(0.141946166754,7.200663822e-5,-0.119544796646,-1.77173322299e-4),
vec4(2.07405500114e-2,-1.14842841867e-5,-8.62207077444e-3,-3.69676563423e-5),
vec4(-5.56273236871e-2,-1.20210148452e-4,3.98096106946e-2,-1.41545009683e-4),
vec4(0.108465492725,5.90040326642e-6,-0.117651417851,-2.08910714719e-4),
vec4(-1.2402223656e-3,-1.23962585349e-4,-1.99553258717e-2,-1.29158273921e-4),
vec4(-7.05630779266e-2,2.30607565754e-5,2.56621018052e-2,-2.1753742476e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(0, 1)));
res += dot(vec4[](
vec4(9.87209305167e-2,4.84965021315e-5,-1.52868079022e-2,8.23959635454e-5),
vec4(2.23245043308e-2,7.13128683856e-5,7.51913804561e-3,-1.01767160231e-4),
vec4(-2.26586442441e-2,-1.25312044474e-5,3.00471689552e-2,-9.22359831748e-5),
vec4(2.23221704364e-2,-1.02695930764e-5,1.0625012219e-2,-6.79617951391e-5),
vec4(-1.26526961103e-2,1.16460258141e-4,-3.66131099872e-3,-1.15066410217e-4),
vec4(-2.73736454546e-2,-4.20029718953e-5,1.20334152598e-3,-1.6647328448e-4),
vec4(-2.19044350088e-2,4.59112488898e-5,3.3500880003e-2,-1.99283109396e-4),
vec4(-2.50160768628e-2,-1.58391540026e-5,9.47057735175e-4,-1.17246629088e-4),
vec4(-1.51590313762e-2,1.09466112917e-4,-5.63523313031e-3,-1.3012503041e-4)
)[index.x * 3 + index.y], EXPANDED0_tex(base + EXPANDED0_pt * vec2(1, 1)));
return vec4(res, 0, 0, 1);
}
