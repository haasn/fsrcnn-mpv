//!HOOK LUMA
//!DESC feature map
//!BIND LUMA
//!SAVE FEATURES
//!COMPONENTS 4

vec4 hook()
{
vec4 res = vec4(-8.86457692832e-3,-4.83089499176e-3,0.148162215948,2.72942371666e-2);
res += vec4(-4.38778102398e-2,2.18669418246e-2,2.64104735106e-2,-1.23165119439e-2) * float(LUMA_texOff(vec2(-2,-2)));
res += vec4(3.44593413174e-2,3.55685949326e-2,3.59983183444e-3,-5.50974607468e-2) * float(LUMA_texOff(vec2(-2,-1)));
res += vec4(-0.141739219427,8.26197937131e-2,0.136241704226,0.101086564362) * float(LUMA_texOff(vec2(-2,0)));
res += vec4(4.32096794248e-2,3.96780727897e-4,4.48036417365e-2,7.42272567004e-3) * float(LUMA_texOff(vec2(-2,1)));
res += vec4(0.102353803813,2.30003613979e-2,5.23625733331e-3,-2.94737871736e-2) * float(LUMA_texOff(vec2(-2,2)));
res += vec4(2.3399380967e-2,1.46378371865e-2,1.17366220802e-2,-2.20789331943e-2) * float(LUMA_texOff(vec2(-1,-2)));
res += vec4(-4.45792526007e-2,-1.59452925436e-3,7.94737711549e-2,6.6229224205e-2) * float(LUMA_texOff(vec2(-1,-1)));
res += vec4(1.8363205716e-2,-0.100366316736,0.10015399754,-1.77555903792e-2) * float(LUMA_texOff(vec2(-1,0)));
res += vec4(-3.4572891891e-2,-1.06960590929e-2,2.61787064373e-2,5.08790165186e-2) * float(LUMA_texOff(vec2(-1,1)));
res += vec4(-5.1618244499e-2,3.73560637236e-2,5.61593137681e-2,-3.83656583726e-2) * float(LUMA_texOff(vec2(-1,2)));
res += vec4(3.27723436058e-2,8.1143707037e-2,2.60361097753e-2,5.11669553816e-2) * float(LUMA_texOff(vec2(0,-2)));
res += vec4(-2.62435246259e-2,-0.137421473861,6.32160827518e-2,1.79958026856e-2) * float(LUMA_texOff(vec2(0,-1)));
res += vec4(-9.83286928385e-3,1.23122632504,-0.479972332716,1.1608453989) * float(LUMA_texOff(vec2(0,0)));
res += vec4(-6.55845645815e-3,-0.120231546462,0.133179977536,3.51167581975e-2) * float(LUMA_texOff(vec2(0,1)));
res += vec4(-3.00472341478e-2,3.31439189613e-2,-5.72661357e-3,9.91264730692e-2) * float(LUMA_texOff(vec2(0,2)));
res += vec4(-5.53337857127e-2,1.43132843077e-2,-1.26999663189e-2,-4.738509655e-2) * float(LUMA_texOff(vec2(1,-2)));
res += vec4(2.82985847443e-2,5.20521774888e-2,6.0180105269e-2,-2.18068230897e-2) * float(LUMA_texOff(vec2(1,-1)));
res += vec4(-5.59655837715e-2,-0.135638535023,0.124812573195,7.0796482265e-2) * float(LUMA_texOff(vec2(1,0)));
res += vec4(-1.94083787501e-2,-1.13721052185e-2,4.53431531787e-2,5.62542192638e-2) * float(LUMA_texOff(vec2(1,1)));
res += vec4(-1.95454917848e-2,2.2623764351e-2,3.87756302953e-2,-1.72457080334e-2) * float(LUMA_texOff(vec2(1,2)));
res += vec4(3.48000116646e-2,-2.26845890284e-2,-2.93635576963e-2,1.17758847773e-2) * float(LUMA_texOff(vec2(2,-2)));
res += vec4(-5.38412816823e-2,1.61512866616e-2,1.00569007918e-2,-3.26526239514e-2) * float(LUMA_texOff(vec2(2,-1)));
res += vec4(1.88723076135e-2,9.11628678441e-2,-8.9679955272e-4,4.30206302553e-3) * float(LUMA_texOff(vec2(2,0)));
res += vec4(-3.46153927967e-3,2.22660414875e-2,3.10884844512e-2,-2.12568137795e-2) * float(LUMA_texOff(vec2(2,1)));
res += vec4(1.09416712075e-2,3.61104086041e-2,2.10069324821e-2,-3.61080206931e-2) * float(LUMA_texOff(vec2(2,2)));
res = mix(res, vec4(8.81294719875e-3,3.01210992038e-2,4.23631183803e-2,3.95227335393e-2) * res, lessThan(res, vec4(0.0)));
return vec4(res);
}

//!HOOK LUMA
//!DESC shrinking
//!BIND FEATURES
//!SAVE MODEL
//!COMPONENTS 2

vec4 hook()
{
vec2 res = vec2(-0.426695048809,0.347394198179);
res += mat4x2(-0.288370102644,-0.240694642067,0.965256631374,-0.492584973574,-0.434856414795,0.246492579579,0.665271162987,-0.708780407906) * vec4(FEATURES_texOff(vec2(0,0)));
res = mix(res, vec2(0.466272115707,8.53745639324e-2) * res, lessThan(res, vec2(0.0)));
return vec4(res, 0.0, 0.0);
}

//!HOOK LUMA
//!DESC mapping
//!BIND MODEL
//!SAVE MODEL
//!COMPONENTS 2

vec4 hook()
{
vec2 res = vec2(0.288623064756,0.179249316454);
res += mat2(3.60559336841e-2,-1.78868800867e-3,0.17033649981,-5.08018732071e-2) * vec2(MODEL_texOff(vec2(-1,-1)));
res += mat2(-0.143693849444,8.06971415877e-2,-4.63935546577e-3,0.17884491384) * vec2(MODEL_texOff(vec2(-1,0)));
res += mat2(2.50843688846e-2,-1.37267112732e-2,8.63914862275e-2,-6.32653087378e-2) * vec2(MODEL_texOff(vec2(-1,1)));
res += mat2(-0.147743701935,0.100699163973,-4.14614230394e-2,0.103857569396) * vec2(MODEL_texOff(vec2(0,-1)));
res += mat2(1.06275629997,-0.675453126431,-0.225764840841,0.569409489632) * vec2(MODEL_texOff(vec2(0,0)));
res += mat2(-0.133118599653,0.128260374069,0.101189151406,0.251569926739) * vec2(MODEL_texOff(vec2(0,1)));
res += mat2(3.31527963281e-2,6.8460595794e-3,0.124783158302,8.31766799092e-2) * vec2(MODEL_texOff(vec2(1,-1)));
res += mat2(-0.13651317358,0.107196234167,7.6734021306e-2,0.202287867665) * vec2(MODEL_texOff(vec2(1,0)));
res += mat2(2.85350326449e-2,-1.82138066739e-2,0.10200265795,-4.52295467257e-2) * vec2(MODEL_texOff(vec2(1,1)));
res = mix(res, vec2(0.12461514771,0.500106453896) * res, lessThan(res, vec2(0.0)));
return vec4(res, 0.0, 0.0);
}

//!HOOK LUMA
//!DESC expansion
//!BIND MODEL
//!SAVE EXPANDED
//!COMPONENTS 4

vec4 hook()
{
vec4 res = vec4(-0.544858276844,0.234514191747,-3.39564569294e-2,-7.04471841455e-2);
res += mat2x4(0.943406283855,0.125708475709,-0.193366408348,-0.168442100286,-0.700045704842,-0.174264341593,0.363390028477,0.259187221527) * vec2(MODEL_texOff(vec2(0,0)));
res = mix(res, vec4(0.837689876556,-2.93831247836e-3,2.34151631594e-2,9.64965391904e-3) * res, lessThan(res, vec4(0.0)));
return vec4(res);
}

//!WIDTH LUMA.w 3 *
//!HEIGHT LUMA.h 3 *
//!HOOK LUMA
//!DESC reconstruction
//!BIND EXPANDED
//!SAVE LUMA
//!COMPONENTS 1

vec4 hook()
{
float res = float(0.400902688503);
vec2 fcoord = fract(EXPANDED_pos * EXPANDED_size);
vec2 base = EXPANDED_pos + (vec2(0.5) - fcoord) * EXPANDED_pt;
ivec2 index = 2 - ivec2(fcoord * vec2(3));
res += dot(vec4[](
vec4(3.00590246916e-2,4.02098009363e-3,4.71992185339e-3,1.28630930558e-2),
vec4(2.07914244384e-2,1.09554547817e-2,4.01777448133e-3,1.21963014826e-2),
vec4(-1.27619719133e-2,2.53674499691e-2,4.76060761139e-3,1.19819259271e-2),
vec4(1.06960143894e-2,1.3466139324e-2,1.35443424806e-2,1.78537871689e-2),
vec4(1.36137995869e-2,2.45900787413e-2,9.24944318831e-3,1.5656368807e-2),
vec4(4.80147916824e-3,3.96899282932e-2,8.39684531093e-3,1.40550602227e-2),
vec4(-2.83670015633e-2,2.6010915637e-2,2.98371259123e-2,2.62305531651e-2),
vec4(-5.21721644327e-3,3.9237935096e-2,1.86355262995e-2,2.13932394981e-2),
vec4(3.48034091294e-2,4.79133762419e-2,6.39391085133e-3,1.40516106039e-2)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(-1, -1)));
res += dot(vec4[](
vec4(-1.2529364787e-2,6.63314983249e-2,4.16601784527e-2,1.87576469034e-2),
vec4(5.20477667451e-2,5.67371174693e-2,3.99134261534e-3,3.05198300339e-5),
vec4(0.177495077252,2.41264794022e-2,-4.6215031296e-2,-2.5083411485e-2),
vec4(-3.04935202003e-2,6.94402232766e-2,3.74496690929e-2,1.89691353589e-2),
vec4(3.97892333567e-2,5.72022795677e-2,-2.92196753435e-4,4.32643078966e-4),
vec4(0.182731688023,2.26216763258e-2,-6.06992281973e-2,-2.73759234697e-2),
vec4(-1.22038852423e-2,6.43357858062e-2,1.8200526014e-2,8.00641998649e-3),
vec4(4.51395437121e-2,5.64513094723e-2,-5.56256016716e-3,-3.68832820095e-3),
vec4(0.162484481931,2.9202003032e-2,-6.12515099347e-2,-2.80180256814e-2)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(0, -1)));
res += dot(vec4[](
vec4(-1.29130724818e-2,2.31010410935e-2,3.09292264283e-2,2.62299086899e-2),
vec4(-2.12957151234e-3,4.30558696389e-2,2.79256142676e-2,2.54387874156e-2),
vec4(2.59018819779e-2,5.80419749022e-2,1.45005406812e-2,2.14565768838e-2),
vec4(2.40904204547e-2,1.06589039788e-2,1.97468362749e-2,1.77804101259e-2),
vec4(1.58850438893e-2,2.89175081998e-2,1.64044164121e-2,1.7552241683e-2),
vec4(-3.2007212285e-3,4.63505089283e-2,1.71841308475e-2,1.81936658919e-2),
vec4(3.89749631286e-2,3.83215770125e-3,1.90273448825e-2,1.61647666246e-2),
vec4(2.32891645283e-2,1.63963120431e-2,1.66201218963e-2,1.60764083266e-2),
vec4(-1.49458767846e-2,3.12223155051e-2,2.18314491212e-2,1.98332946748e-2)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(1, -1)));
res += dot(vec4[](
vec4(-1.29836425185e-3,6.24179132283e-2,1.32874147967e-2,6.01163320243e-3),
vec4(-2.64668427408e-2,6.96350410581e-2,1.0291216895e-2,8.59394483268e-3),
vec4(-1.47577375174e-2,6.67239800096e-2,1.33547130972e-2,9.93559975177e-3),
vec4(5.73914200068e-2,5.0032787025e-2,9.82359051704e-3,4.35302965343e-3),
vec4(3.75122688711e-2,5.48326037824e-2,-5.84516208619e-4,4.8745861277e-3),
vec4(3.51890027523e-2,5.61302192509e-2,4.67381905764e-3,5.28236525133e-3),
vec4(0.165142461658,1.9654918462e-2,-1.51733646635e-3,-2.22930894233e-3),
vec4(0.168069988489,1.90563201904e-2,-9.31407045573e-3,5.38081279956e-4),
vec4(0.139982253313,2.73730847985e-2,-6.94281188771e-3,1.17864564527e-3)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(-1, 0)));
res += dot(vec4[](
vec4(0.367527991533,1.89054924995e-2,-6.73271566629e-2,-5.40054738522e-2),
vec4(0.414703339338,4.45130327716e-3,-5.39013892412e-2,-4.40158694983e-2),
vec4(0.352110624313,2.4565583095e-2,-6.13323152065e-2,-4.7643493861e-2),
vec4(0.407517135143,6.21781405061e-3,-7.68092125654e-2,-5.19848428667e-2),
vec4(0.473806083202,-1.26233268529e-2,-5.06568364799e-2,-3.78747284412e-2),
vec4(0.407592773438,6.30854256451e-3,-5.92569373548e-2,-4.66999560595e-2),
vec4(0.352571278811,2.4929817766e-2,-8.86681303382e-2,-5.95128200948e-2),
vec4(0.413764238358,6.22550724074e-3,-7.42565244436e-2,-5.25106266141e-2),
vec4(0.366961032152,1.99336577207e-2,-6.55834823847e-2,-5.4882414639e-2)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(0, 0)));
res += dot(vec4[](
vec4(0.138327002525,2.33498550951e-2,-3.93504649401e-2,-1.57099999487e-2),
vec4(0.168781131506,1.27306906506e-2,-3.59156243503e-2,-1.37959746644e-2),
vec4(0.165888950229,1.10493972898e-2,-1.99858937413e-2,-1.41029311344e-2),
vec4(3.44230420887e-2,5.01553975046e-2,-3.9411848411e-3,-4.98077087104e-3),
vec4(3.89047190547e-2,4.5630287379e-2,-5.81060163677e-3,-5.10866101831e-3),
vec4(5.66900484264e-2,4.07445318997e-2,-1.96485547349e-3,-8.85317008942e-3),
vec4(-1.56563799828e-2,6.03873208165e-2,2.08653640002e-2,4.78432700038e-3),
vec4(-2.4841196835e-2,6.12302720547e-2,1.8267294392e-2,3.8704671897e-3),
vec4(-8.97794670891e-4,5.45547269285e-2,1.55072398484e-2,-4.15022543166e-4)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(1, 0)));
res += dot(vec4[](
vec4(-1.23449098319e-2,2.97171417624e-2,3.40763479471e-2,3.22474017739e-2),
vec4(2.3577189073e-2,1.48969832808e-2,2.6651006192e-2,2.62956283987e-2),
vec4(3.88096831739e-2,3.8710818626e-3,2.79357135296e-2,2.59428285062e-2),
vec4(-3.9624015335e-4,4.66080456972e-2,3.57018969953e-2,3.29909399152e-2),
vec4(1.60381048918e-2,2.93419957161e-2,2.89538446814e-2,2.81253308058e-2),
vec4(2.44057681412e-2,1.25385569409e-2,3.54672670364e-2,2.9714025557e-2),
vec4(2.64215376228e-2,5.8510068804e-2,4.23205085099e-2,3.71852554381e-2),
vec4(-3.60717764124e-3,4.64953891933e-2,4.05361093581e-2,3.49715687335e-2),
vec4(-1.470586285e-2,2.72374730557e-2,4.54678162932e-2,3.59832234681e-2)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(-1, 1)));
res += dot(vec4[](
vec4(0.159858956933,2.96562835574e-2,-4.24389392138e-2,-1.76517795771e-2),
vec4(4.35136109591e-2,5.59335276484e-2,-1.34485606104e-2,-4.53060353175e-3),
vec4(-1.44555894658e-2,6.37911260128e-2,1.26213217154e-2,7.37520493567e-3),
vec4(0.182339504361,2.07491852343e-2,-4.01641279459e-2,-1.55914705247e-2),
vec4(4.01279255748e-2,5.37224635482e-2,-4.80281421915e-3,-1.26970437123e-4),
vec4(-3.15106995404e-2,6.69003427029e-2,3.11490185559e-2,1.53981661424e-2),
vec4(0.17758217454,2.35287062824e-2,-3.04804872721e-2,-1.70450340956e-2),
vec4(5.28185963631e-2,5.22740334272e-2,-8.65759036969e-4,-3.51467984729e-3),
vec4(-1.46344564855e-2,6.42981305718e-2,3.21087539196e-2,1.23334946111e-2)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(0, 1)));
res += dot(vec4[](
vec4(3.75876091421e-2,5.01545146108e-2,3.16297519021e-3,9.65205579996e-3),
vec4(-3.69403557852e-3,4.21684384346e-2,5.80439250916e-3,1.07563883066e-2),
vec4(-2.96973045915e-2,2.9119797051e-2,1.35628860444e-2,1.44343357533e-2),
vec4(5.60544058681e-3,4.31138537824e-2,1.93804968148e-3,7.14849401265e-3),
vec4(1.27347717062e-2,3.01073845476e-2,-1.90594198648e-3,5.5239899084e-3),
vec4(1.11742001027e-2,1.7146198079e-2,-2.47619580477e-4,6.52350625023e-3),
vec4(-1.13886808977e-2,2.90119610727e-2,7.96404725406e-4,5.39378309622e-3),
vec4(2.01342888176e-2,1.55374985188e-2,-2.73191765882e-3,3.07217007503e-3),
vec4(3.26254405081e-2,5.88187994435e-3,-4.45386627689e-3,3.42170288786e-3)
)[index.x * 3 + index.y], EXPANDED_tex(base + EXPANDED_pt * vec2(1, 1)));
return vec4(res, 0, 0, 1);
}
